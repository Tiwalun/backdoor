{% extends "layout.html" %}
{% block content %}
{% for category, message in get_flashed_messages(with_categories=true) %}
    <div class="alert alert-{{ category }} col-lg-12" role="alert"><strong>{{ message }}</strong></div>
{% endfor %}
<h4>{{ user.username }}</h4>
<table class="table table-hover table_general">
    <tr>
        <td>Name</td>
        <td>
            <form class="change_user_name" action="{{ url_for('change_user_name') }}" method=post>
                <div class="input-group">
                    <input type="text" name="change_user_name" class="form-control" title="Name" value="{{ user.name }}" readonly />
                    <span class="input-group-btn">
                        <button class="btn btn-default button_change_user_name" type="submit">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true">
                            </span>
                        </button>
                    </span>
                </div>
                <input type="text" name="change_user_id" class="invisible" title="" value="{{ user.id }}" />
            </form>
        </td>
    </tr>
    <tr>
        <td>Password</td>
        <td>
            <form class="change_user_password" action="{{ url_for('change_user_password') }}" method=post>
                <div class="input-group">
                    <input type="password" name="change_user_password" class="form-control" title="Password" value="password" readonly />
                    <input type="password" name="change_user_password_validation" class="form-control" title="Password validation" value="password"/>
                    <span class="input-group-btn">
                        <button class="btn btn-default button_change_user_password" type="submit">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true">
                            </span>
                        </button>
                    </span>
                </div>
                <input type="text" name="change_user_id" class="invisible" title="" value="{{ user.id }}" />
            </form>
        </td>
    </tr>
    <tr>
        <td>Level</td>
        <td>
            <form class="change_user_level" action="{{ url_for('change_user_level') }}" method=post>
                <div class="input-group">
                    <input type="text" name="change_user_level" class="form-control" title="Token owner" value="{{ user.level }}" readonly />
                    <span class="input-group-btn">
                        <button class="btn btn-default button_change_user_level" type="submit">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true">
                            </span>
                        </button>
                    </span>
                </div>
                <input type="text" name="change_user_id" class="invisible" title="" value="{{ user.id }}" />
            </form>
        </td>
    </tr>
    <tr>
        <td>Email</td>
        <td>
            <form class="change_user_email" action="{{ url_for('change_user_email') }}" method=post>
                <div class="input-group">
                    <input type="text" name="change_user_email" class="form-control" title="Token owner" value="{{ user.email }}" readonly />
                    <span class="input-group-btn">
                        <button class="btn btn-default button_change_user_email" type="submit">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true">
                            </span>
                        </button>
                    </span>
                </div>
                <input type="text" name="change_user_id" class="invisible" title="" value="{{ user.id }}" />
            </form>
        </td>
    </tr>
    <tr>
        <td>nethzid</td>
        <td>
            <form class="change_user_nethzid" action="{{ url_for('change_user_nethzid') }}" method=post>
                <div class="input-group">
                    <input type="text" name="change_user_nethzid" class="form-control" title="Token owner" value="{{ user.nethzid }}" readonly />
                    <span class="input-group-btn">
                        <button class="btn btn-default button_change_user_nethzid" type="submit">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true">
                            </span>
                        </button>
                    </span>
                </div>
                <input type="text" name="change_user_id" class="invisible" title="" value="{{ user.id }}" />
            </form>
        </td>
    </tr>
    <tr>
        <td>Tokens</td>
        <td>
             [
            {% for token in user.tokens %}
            <a href="{{ url_for('tokens', id=token.id) }}">{{ token.id }}</a> |
            {% else %}
            {% endfor %}
            <a href="{{ url_for('tokens', token_owner_id=user.id, token_owner_name=user.name) }}">+</a>
            ]
        </td>
    </tr>
    <tr>
        <td>Welcome Sound</td>
        <td>
            <select name="change_user_welcome_sound" class="form-control">
                <option value="">NONE</option>
                {% for sound in sounds %}
                    <option value="sound['path']" {% if previous['user_welcome_sound'] == sound.path %}selected="selected" {% endif %}>sound['name']</option>
                {% endfor %}
            </select>
        </td>
    </tr>
    <tr>
        <td>Creation Date</td>
        <td>{{ user.creation_date }}</td>
    </tr>
    <tr>
        <td>Remove?</td>
        <td>
            <form class="remove_form" action="{{ url_for('remove_user') }}" method=post>
                <input type="submit" class="form-control btn-danger" value="Remove" />
                <input name="user_id" class="form-control invisible" title="User id" value="{{ user.id }}" />
            </form>
        </td>
    </tr>
</table>
<script type="text/javascript">

    remove_init();

    init_edit_field('.button_change_user_name');
    init_edit_field('.button_change_user_password');
    init_edit_field('.button_change_user_level');
    init_edit_field('.button_change_user_email');
    init_edit_field('.button_change_user_nethzid');
</script>
{% endblock %}